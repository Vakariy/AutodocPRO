import io.restassured.path.json.JsonPath;
import io.restassured.path.json.exception.JsonPathException;
import io.restassured.response.Response;

import java.util.ArrayList;
import java.util.Arrays;

import org.testng.annotations.Test;

import static io.restassured.RestAssured.given;

public class VinTest {
    private static final String BASE_URI = "http://www.haynespro-services.com/workshopServices3/rest/jsonendpoint/decodeVINV4?vrid=8529A96EE610B6DEC5EDE9D623A07C4D&descriptionLanguage=en&vin=";

    @Test
    public static void main(String[] args) {
        //vin list from excel (386 q-ty)
        ArrayList<String> vinList = new ArrayList<>(Arrays.asList(
                "VF36D9HZC21504826",
                "VF1BG0R0625940657",
                "WVWZZZAUZJP047761",
                "VF1AH000464091075",
                "SHSRD97905U012602",
                "VF7SC8HR4BW624016",
                "VF12RAU1D56609587",
                "VF3ZAPMRA17030961",
                "UU1LSDJKH37037254",
                "VR1URHNSSKW064545",
                "KL1MF4819BC569836",
                "VF7231A3216144932",
                "VF1JP0FF541156460",
                "VF32AWJZT40526451",
                "VF7NC9HP0EY584863",
                "VF7VDVV0009VV3679",
                "ZFA18800005338813",
                "ZFA35600006G47930",
                "WBAAS71010CK51398",
                "W0LSH9EBXB4162356",
                "VF7N1WJYB73682772",
                "VF1FLBCB64Y043709",
                "WVGZZZ5NZ9W513169",
                "WVWZZZ1JZ3B176232",
                "WDB2030041A478365",
                "WVWZZZAAZCD025220",
                "VF1KCE8EF32315840",
                "VF1JMS50636116697",
                "VF7UA9HZC45030138",
                "WAUZZZ8DZXA324326",
                "VF7UARHB8BJ821252",
                "VF7LC9HXC74205094",
                "VF1RFB00355366920",
                "ZAR93700003468154",
                "VF1KCEDEF35321928",
                "WBAVC31080KU53927",
                "VF7BZRHXA12737951",
                "VF320CA9223266285",
                "WVWZZZ1KZBP108606",
                "JN1JCAT32U0009236",
                "VNKKC96340A252843",
                "VF1FW51K159964443",
                "VF1JMRG0634400651",
                "NMTKZ3BXX0R048062",
                "VF1CN0A0538341656",
                "WAUZZZ8P8AB020244",
                "VF7SC8FP0BA586826",
                "VF34C9HXC55188732",
                "VF33A8HZB82613155",
                "VF7SC8FP0BA605121",
                "WVWZZZ3BZ2E376588",
                "WF0RXXGCDRAG18942",
                "VF37ERHYF33234644",
                "VF1B5760512576203",
                "KL1SF487J6B596603",
                "VSSZZZ6LZ7R183987",
                "WAUZZZ4F97N093868",
                "VNKKH963X0A091867",
                "VF1BG0R0625940657",
                "VF1FW51J156264416",
                "VF7DC6FZB76471392",
                "VF1C068A523433243",
                "VF7SA5FF8FW557918",
                "WF0CXXGAKCFM55838",
                "VF1CNAA0541270272",
                "VF7CHRHYB39205057",
                "VF7AJ8HSL94875052",
                "WAUZZZ8KXAA161715",
                "VF3VV4HK8CU805575",
                "VF3EBRHRH13339628",
                "ZFA25000001581783",
                "VF30U9HZH9S241830",
                "VF31CCDZ250565349",
                "WVWZZZ1JZ2W083707",
                "VF7PNCFAC89405842",
                "VF1RFE00554443939",
                "VF7RDRHF8AL573442",
                "VF34C9HP0AY163015",
                "VF1BA0E0516756720",
                "VF34H9HP0AS276767",
                "VF1BB05CF25761138",
                "VF7RW9HD8EL503624",
                "VF1FW1AB544973449",
                "WVGZZZ7LZ6D018929",
                "WF0KXXERJKCY17552",
                "VF7LA9HXC74160743",
                "VF32AKFXE40413121",
                "VF1FLB0A6CY458648",
                "WVWZZZ1JZYB131578",
                "VF320AH1101900895",
                "VF7RWRHHA9L584479",
                "VF32AKFWF43467662",
                "UU15SDAG353299069",
                "ZFA24400007267125",
                "VF320AC1125033388",
                "WBA3S31000K412959",
                "SJNFDNJ11U1458061",
                "VF1JP0WF542969594",
                "VF1C068AE34216992",
                "VF1AGVYF058102848",
                "VF1BT190E41064122",
                "VF1CR2V0H45168158",
                "JTEGD32MX07025723",
                "VF1CR270E44071176",
                "W0L0XCE7564281691",
                "WAUZZZ8U7JR073157",
                "VF38CXFXA81214881",
                "VF32M8HR0AY175832",
                "VF1CND10544711608",
                "VF1BB8M0541711266",
                "VF1BG0R0625940657",
                "VF15RBF0A53770934",
                "VF7LC9HXC74532470",
                "VSSZZZ5PZCR017823",
                "VF1FLBHC6CY409548",
                "WF0XXXTTGXKC40198",
                "W0LF7BHB69V622748",
                "VF1C4050500764837",
                "VF3CCHMZ0EW025026",
                "WVWZZZ1YZ3M305068",
                "WV1ZZZ7HZCH018067",
                "WF02XXERK2MP22892",
                "U5YHN816ADL014000",
                "VF77JBHY6HJ873270",
                "VF7CH6FZB39180771",
                "VF1JM1R0534944969",
                "WF0KXXGCBKBD25325",
                "VF3581E4809774178",
                "SJNFDAE11U2211725",
                "VF1C4010401809113",
                "VF38DAHWTFL005356",
                "VF3MCBHZHHS080266",
                "VF1FW50S160780731",
                "VF3CA5GRMFW023247",
                "VF1BBR7CF33259633",
                "VF3WA9HXC9T016157",
                "VF1JMT4N639478960",
                "VF38BRHZE80975441",
                "JN1JCAT32U0020863",
                "WF0KXXWPCKHJ71995",
                "VF3GJNFUB95060979",
                "WF0DXXGAJD5R89969",
                "VF37ANFZ231368534",
                "VF1JA04N523860923",
                "WF0EXXWPCEGL47658",
                "SHSRD97905U000272",
                "ZFA3120000J702378",
                "ZFA3120000JA31362",
                "ZAR95500001083721",
                "WAUZZZ4M2HD017513",
                "VF320AA9225654505",
                "VF1FW15B547453744",
                "WF0GXXGAJG9U54963",
                "VF1BBR7CF30140920",
                "VF1FLAHA6AV370844",
                "VF35CD9BD60083558",
                "WAUZZZ8P87A032683",
                "VF3PMCFAC88492054",
                "WF0AXXGAJAYR01409",
                "UU1BSDADK44701140",
                "W0LPE9EM6C2072215",
                "VF1BG0G0623870758",
                "WVWZZZAWZKY144845",
                "JN1TENT30U0225450",
                "VR7EFYHYCLJ771688",
                "ZAR93900007045092",
                "VF1BB1KEF42189129",
                "VF7GCWJYB94193918",
                "VF1BG0R0625940657",
                "ZFA17600000556495",
                "VF1JZNAB649213778",
                "VR3UPHNSSLT039626",
                "VF1R9800362484088",
                "SHHMB27600U010823",
                "UU1BSDBLK46971457",
                "VF654ANA000001633",
                "TRUZZZ8J591033667",
                "VF38BRHZE80876999",
                "WBAWZ310600F63408",
                "VF7GJRHYK93048736",
                "WDC2049021F867695",
                "VF7SA9HPKCW570995",
                "VF38BP8CE80514952",
                "VF3MRHNSJJS419363",
                "TRUZZZ8P9B1000293",
                "VF1DZ1N0643399022",
                "VF1JMRG0632629196",
                "WVWZZZ9NZ6D053938",
                "VF3XDRHKH64077359",
                "VF1JLBHB68Y286135",
                "VF1AH000063416150",
                "VF15R040H50578180",
                "WAUZZZGE9KB005012",
                "WAUZZZ8PX5A025120",
                "WVWZZZ9NZ5D033432",
                "VF38UAHWTGL006769",
                "WF0AXXWPDAXL46649",
                "WF0VXXGBFVYE30785",
                "VF39D4HXB92080636",
                "WVWZZZ16ZFM810516",
                "VF1JZ890H54430415",
                "VNKKC96340A038564",
                "VF1BZ0N0641006300",
                "VF1KCTEEF37569727",
                "VF7YC2MFB12F61996",
                "VF3GCRHYB96238938",
                "W0LPE6EN8A8085775",
                "VF3EBRHTB13111671",
                "VF1B5680518574324",
                "VF7CH9HXC25843667",
                "VF32AKFXE40499117",
                "WF0AXXWPMADC30508",
                "WF0GXXGBBG7Y19411",
                "UU1LSDAFH36272790",
                "TMBEL6NH7E4510733",
                "VF7SXYHYPLT518024",
                "WVWZZZ7MZVV039775",
                "VF7BZRHXB86024882",
                "WAUZZZ8E35A096111",
                "UU1HSDAG549014341",
                "WF0UXXGAJU9B74314",
                "WF0LXXLURL3L08203",
                "VF1BBR8EF33172583",
                "UU1B5220964186091",
                "UU1HSDJ9G54438914",
                "ZFA19900000381543",
                "VF1F4060514514960",
                "ZFA19900000613601",
                "WF0JXXGAJJCR49858",
                "W0L0AHL4858155846",
                "WBA1T110205B29120",
                "VF33ARHYB82844074",
                "VF38DRHH8CL051810",
                "WAUZZZ8V6GA076227",
                "UU17SDCL552337945",
                "ZFA31200000519741",
                "W0L0SDL0896077442",
                "VF7S0HDZF57187533",
                "WBA7N310905S56749",
                "VF1FLA1AFCY456729",
                "VF1BGETB635999399",
                "VF3YBAMFA11384264",
                "VF1C0660517467917",
                "VF3XS9HM0FZ060290",
                "VSEFJB43C00202764",
                "WAUZZZ8U3HR013631",
                "VF1RFC00553490754",
                "VF7UD9HZCAJ726268",
                "VF32MKFT0BY040466",
                "VF73A9HP8EJ810575",
                "VF7BU9HD5GZ906043",
                "VF7X15C00015C9948",
                "WF0GXXGAJG9E18152",
                "WDD2452081J615156",
                "VF32L8HZA9Y018599",
                "VF320CD6201661689",
                "VF7EB4HWB13056732",
                "VF3CCHNPNKT031554",
                "VF30U9HR8BS124729",
                "WAUZZZ8T1BA000938",
                "WVWZZZ1JZ3B082057",
                "MMBCNK7404D004578",
                "WDB9066131S534646",
                "VF1BRCP0H41525280",
                "VF7N0RHYB73053154",
                "VF1B54G0E20052984",
                "WF0HXXTTPH5R42653",
                "VF1CR2V0H46193778",
                "VF3LBBHZHGS190585",
                "WDB1704661F239793",
                "VF32CKFWA47467520",
                "YV1FS79C0J2454564",
                "VF32ARHYF41641016",
                "WVWZZZ9NZ9Y234877",
                "U5YEH814ADL053778",
                "UU1BSDMER43330477",
                "VF1BG0R0625521719",
                "VSSZZZ3RZ9R004300",
                "JTDKC183905036681",
                "VF1B57BB515294954",
                "WVWZZZ1KZBW544891",
                "VF1BM0G0628013222",
                "VF1BG0A0524557174",
                "KMHJN81VP7U596238",
                "WDB2100151A640033",
                "VF3WC9HXC34363680",
                "SADCA2BN8JA350944",
                "1J4FAC9186P725151",
                "VF36ERHRH21163867",
                "WDB2030061A029131",
                "JN10KYY60U0004468",
                "W0L0SDL0886161219",
                "VSSZZZ6JZAR121356",
                "UU15SDCLC49403368",
                "VF1RFB00561692596",
                "VF38CRFVE80430499",
                "SARRTZWBNYD473708",
                "SJNFCAF15U7023930",
                "VF7MCWJYB65861128",
                "WF0DXXGAKDFY15302",
                "WF0AXXTTFA5D39257",
                "WDD1770031J056330",
                "ZLA31200005074526",
                "WDC2511221A026008",
                "VF35BRHYF60538668",
                "VF33C8HZB82409282",
                "VF1JZNAJ649328308",
                "VF1JZ0Y0H55058238",
                "SB1KB56E20F005527",
                "VF1JMRG0633312777",
                "VF1MA000663445699",
                "VWAPF0559VA772583",
                "WDD1760431V101833",
                "W0L0AHM75B2141751",
                "VF32E8HXF44284990",
                "WVWZZZ1KZBP051666",
                "WVWZZZH0ZNW230481",
                "ZFA18600002263723",
                "VF1FC0DAF23358864",
                "VF17R0J0A59487448",
                "WF0BXXMRKBGB44310",
                "VSSZZZ5FZER087073",
                "WAUZZZ4B13N001286",
                "ZFA19900000289134",
                "WV1ZZZ7HZFH081741",
                "VF3221PA212455272",
                "WVWZZZAUZFW168327",
                "VF34C9HZH55195059",
                "VF7N1RHYB73902956",
                "VF1B56J0519667153",
                "VF37AKFXT32426102",
                "WVWZZZ1JZ2W178895",
                "VF3224AA212269131",
                "VF1C0630513302156",
                "KMHBT51VP8U742901",
                "VF1KG0F0627260925",
                "WDB2030081A560079",
                "ZAR93200001087237",
                "SJNFBAK12U2093491",
                "NMTER16R40R003597",
                "WV1ZZZ7HZEH058091",
                "VF1MA000962553661",
                "VF7232J5215506908",
                "VF3WA9HZC33467302",
                "VF33HRHSB82796792",
                "VF7AJ8HSL94884235",
                "VF1JMJEP640127769",
                "VF1B53Y0509502302",
                "VF32M8HR0CY013144",
                "JN10KYY60U0817952",
                "WVGZZZ5NZHW881370",
                "VF33C9HXC84877865",
                "VF1CNAA0541084969",
                "VF37J9HZC68015168",
                "VF77J9HZC67637867",
                "VF7NC9HR8AY591319",
                "VF1CN0E0541080422",
                "VF7FCKFVE26906778",
                "SHHFK37808U001096",
                "VF3YCBMFC11519588",
                "VF1JZ0BB641025330",
                "WF0LXXTACLLA18144",
                "NLHA851AALZ546970",
                "VF1CNAA0540952615",
                "7JRZSBTTDLG049311",
                "WBA2E510705C13620",
                "VF1BMSE0638941039",
                "VF1JP0FF541692064",
                "VF1CR1G0H38981283",
                "VF73DAHXMHJ642918",
                "VF7LA9HYC74866358",
                "VF7FCHFXC28938274",
                "VF73AHNYMHJ621526",
                "NMTDD26RX0R039908",
                "VF7FL9HXC27313160",
                "VF33CRHYB83674779",
                "ZFA24400007070434",
                "VF1FDC1L642369546",
                "UU1BSDBLK47448420",
                "VF7S0VJZF56682616",
                "VF3BZWJZA12448227",
                "WAUZZZ8R7BA031891",
                "VF7EBRHRH13349707",
                "VF3WCKFVC33847684",
                "VF1JA020C19304560",
                "SB1MS3JEX0E470390",
                "VF3LB9HPADS189074"
        ));
        //vin list for FR (100 q-ty)
        ArrayList<String> vinList2 = new ArrayList<>(Arrays.asList(
                "WAUZZZ8X5FB027062",
                "VF1BB0FBF23966272",
                "VF1BR1G0H39711373",
                "VF7JM8HZC97350431",
                "VF36E9HZC21136887",
                "VF3CCBHY6FT150430",
                "WVWZZZ6RZBY000889",
                "WUAZZZ8EX7N905220",
                "WBAAS710X0CH25027",
                "WAUZZZ8R2EA073678",
                "VF3LPHNSTKS088455",
                "TMBUR41U238682627",
                "WAUZZZF30K1018964",
                "VF32CHFZE40827469",
                "VF1TBXG0513704133",
                "WVWZZZ1KZBW007637",
                "WBAVC91070FG67404",
                "WAUZZZ8P17A073396",
                "VF1JZ420644587788",
                "VF1KT0A0641427653",
                "W0L0TGF35Y8009217",
                "VF7NC9HP0CY598708",
                "WVWZZZ6RZFY281471",
                "WVWZZZAUZJP561436",
                "VF7GJ9HXC93469746",
                "VF7PNCFAC89463680",
                "WVWZZZ6NZVW165947",
                "VF32DRFNF42854581",
                "VF1BBCT0532632732",
                "VF1FW1AB542998767",
                "VF1FL000563922156",
                "VF1BR1G0H41463415",
                "WAUZZZ4BZXN119674",
                "VF1FW50J158885652",
                "VF33C9HYC84612450",
                "TMBJC65L3C6016888",
                "WVWZZZ6RZCY109428",
                "VF70PHMZBFE519018",
                "WAUZZZ8U7GR099668",
                "VF38EAHRMFL043072",
                "W0L0SDL6884356988",
                "VF38BD8BD80076860",
                "TMBJC46Y664533214",
                "VSSZZZ6JZFR055761",
                "VF30EBHZMFS271819",
                "WP1ZZZ95ZFLB88241",
                "WVWZZZ16ZEM816263",
                "TMBCS21Z072071343",
                "WBA2A3105FVZ46481",
                "VF3WC9HXC34363709",
                "WAUZZZ8DZYA106310",
                "VF38BRGXE80301413",
                "VF32AHFXF42297394",
                "WVWZZZ1KZCP077590",
                "VF3CCHMZ6FT088466",
                "VF1C066MG22104250",
                "WVWZZZ6RZCY177839",
                "WBAHM42020DG68757",
                "W0LPD9EN0D2105366",
                "UU1LSDAER43011900",
                "VF15RBF0A56698885",
                "WVWZZZ9NZ6Y128821",
                "VF32AHFXF43714733",
                "VF1JZ14P652543786",
                "W0L0TGF35Y2040958",
                "VF7S1VJXB57820546",
                "W0VJD7E88JB651033",
                "VF1KZ1S0646763444",
                "VF1FW50K161545618",
                "VF7FCKFUC9A066911",
                "VF1BMRG0631439316",
                "VF1BRAS3646370410",
                "VSSZZZ6LZ3R140981",
                "WBA8E11070K416394",
                "VF37B9HTCBJ731100",
                "VF32AHFXF43559981",
                "WVWZZZ1JZ2B125861",
                "VF1KA0B0528522502",
                "VF3CCBHY6FT143299",
                "VF7CH6FZB38858358",
                "VF3PNCFAC88244038",
                "W0L000036V110B018",
                "TMBGG6NW2L3056826",
                "WVWZZZ1KZBW576853",
                "WMWMF31040TW60540",
                "WV1ZZZ7HZ4H110154",
                "VF7NXRHH8BY638007",
                "VF1CBR7EF30252585",
                "VF77B9HXCAJ755547",
                "WVWZZZ6RZCY259234",
                "WVGZZZ5NZKW366938",
                "VF7FCKFVB27004893",
                "UU1LSDA1P44768269",
                "WVWZZZAUZEP592458",
                "VF3PNCFAC88349117",
                "WMWXM710502A85139",
                "VF3CU9HP0EY025311",
                "VF15RRL0H47751979",
                "VF1S576B514691968",
                "VF34H9HZH55309965"));

        int count = 0;
        int failedCount = 0;

        System.out.println("{");
        for (String element : vinList2) {
            Response response =
                    given()
                            .header("Authorization", "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjI0MCwiaXNzIjoiYXV0b2RvYy5wcm8iLCJhdWQiOiJhdXRvZG9jLnBybyIsImV4cCI6MTY2OTM2MjkzNH0.2vKATVZqlLl2s4ls7n10nsofTQRDsVha8BhvgK142EQ")
                            .when()
                            .get(BASE_URI + element);

            String responseBody = response.getBody().asString();

            if (responseBody.length() == 0) {
                count++;
                System.out.println(count + ". VIN NOT FOUND: " + element);
                System.out.println();
                failedCount++;
            } else {
                try {
                    count++;
                    JsonPath jsonPath = response.jsonPath();
                    int statusCode = response.getStatusCode();
                    String id = jsonPath.get("id").toString().replace("[", "").replace("]", "");
                    String name = jsonPath.get("name").toString().replace("[", "").replace("]", "");
                    String fullName = jsonPath.get("fullName").toString().replace("[", "").replace("]", "");
                    String madeFrom = jsonPath.get("madeFrom").toString().replace("[", "").replace("]", "");
                    String madeUntil = jsonPath.get("madeUntil").toString().replace("[", "").replace("]", "");
                    String engineCode = jsonPath.get("engineCode").toString().replace("[", "").replace("]", "");
                    String superCarTypeId = jsonPath.get("superCarTypeId").toString().replace("[", "").replace("]", "");

                    System.out.println("\"" + element + "\"" + ": " + "{");
                    System.out.println("\"" + "statusCode" + "\"" + ": " + "\"" + statusCode + "\"" + ",");
                    System.out.println("\"" + "id" + "\"" + ": " + "\"" + id + "\"" + ",");
                    System.out.println("\"" + "name" + "\"" + ": " + "\"" + name + "\"" + ",");
                    System.out.println("\"" + "fullName" + "\"" + ": " + "\"" + fullName + "\"" + ",");
                    System.out.println("\"" + "madeFrom" + "\"" + ": " + "\"" + madeFrom + "\"" + ",");
                    System.out.println("\"" + "madeUntil" + "\"" + ": " + "\"" + madeUntil + "\"" + ",");
                    System.out.println("\"" + "engineCode" + "\"" + ": " + "\"" + engineCode + "\"" + ",");
                    System.out.println("\"" + "superCarTypeId" + "\"" + ": " + "\"" + superCarTypeId + "\"");
                    System.out.println("},");
                } catch (JsonPathException e) {
                    e.printStackTrace();
                }
            }
        }
        System.out.println("}");
        System.out.println("Totally VIN's: " + count);
        System.out.println("NOT FOUND: " + failedCount);
    }
}